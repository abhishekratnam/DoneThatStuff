{"version":3,"file":"figma-squircle.cjs.development.js","sources":["../src/index.ts"],"sourcesContent":["export interface FigmaSquircleParams {\n  cornerRadius?: number\n  topLeftCornerRadius?: number\n  topRightCornerRadius?: number\n  bottomRightCornerRadius?: number\n  bottomLeftCornerRadius?: number\n  cornerSmoothing: number\n  width: number\n  height: number\n}\n\nexport function getSvgPath({\n  cornerRadius = 0,\n  topLeftCornerRadius,\n  topRightCornerRadius,\n  bottomRightCornerRadius,\n  bottomLeftCornerRadius,\n  cornerSmoothing,\n  width,\n  height,\n}: FigmaSquircleParams) {\n  const defaultPathParams = getPathParamsForCorner({\n    width,\n    height,\n    cornerRadius,\n    cornerSmoothing,\n  })\n\n  // Most of the time, all corners will have the same radius\n  // Instead of calculating path params for all 4 corners,\n  // we want to use the default path params whenever possible\n  const topLeftPathPathParams =\n    topLeftCornerRadius !== undefined\n      ? getPathParamsForCorner({\n          width,\n          height,\n          cornerRadius: topLeftCornerRadius,\n          cornerSmoothing,\n        })\n      : defaultPathParams\n\n  const topRightPathPathParams =\n    topRightCornerRadius !== undefined\n      ? getPathParamsForCorner({\n          width,\n          height,\n          cornerRadius: topRightCornerRadius,\n          cornerSmoothing,\n        })\n      : defaultPathParams\n\n  const bottomRightPathPathParams =\n    bottomRightCornerRadius !== undefined\n      ? getPathParamsForCorner({\n          width,\n          height,\n          cornerRadius: bottomRightCornerRadius,\n          cornerSmoothing,\n        })\n      : defaultPathParams\n\n  const bottomLeftPathPathParams =\n    bottomLeftCornerRadius !== undefined\n      ? getPathParamsForCorner({\n          width,\n          height,\n          cornerRadius: bottomLeftCornerRadius,\n          cornerSmoothing,\n        })\n      : defaultPathParams\n\n  return `\n    ${drawTopRightPath(topRightPathPathParams)}\n    ${drawBottomRightPath(bottomRightPathPathParams)}\n    ${drawBottomLeftPath(bottomLeftPathPathParams)}\n    ${drawTopLeftPath(topLeftPathPathParams)}\n  `\n    .replace(/[\\t\\s\\n]+/g, ' ')\n    .trim()\n}\n\nfunction drawTopRightPath({\n  cornerRadius,\n  width,\n  height,\n  a,\n  b,\n  c,\n  d,\n  p,\n  circularSectionLength,\n}: CornerPathParams) {\n  if (cornerRadius) {\n    return `\n    M ${Math.max(width / 2, width - p)} 0\n    C ${width - (p - a)} 0 ${width - (p - a - b)} 0 ${width -\n      (p - a - b - c)} ${d}\n    a ${cornerRadius} ${cornerRadius} 0 0 1 ${circularSectionLength} ${circularSectionLength}\n    C ${width} ${p - a - b}\n        ${width} ${p - a}\n        ${width} ${Math.min(height / 2, p)}`\n  } else {\n    return `M ${width / 2} 0\n    L ${width} ${0}\n    L ${width} ${height / 2}`\n  }\n}\n\nfunction drawBottomRightPath({\n  cornerRadius,\n  width,\n  height,\n  a,\n  b,\n  c,\n  d,\n  p,\n  circularSectionLength,\n}: CornerPathParams) {\n  if (cornerRadius) {\n    return `\n    L ${width} ${Math.max(height / 2, height - p)}\n    C ${width} ${height - (p - a)}\n      ${width} ${height - (p - a - b)}\n      ${width - d} ${height - (p - a - b - c)}\n    a ${cornerRadius} ${cornerRadius} 0 0 1 -${circularSectionLength} ${circularSectionLength}\n    C ${width - (p - a - b)} ${height}\n      ${width - (p - a)} ${height}\n      ${Math.max(width / 2, width - p)} ${height}`\n  } else {\n    return `L ${width} ${height}\n    L ${width / 2} ${height}`\n  }\n}\n\nfunction drawBottomLeftPath({\n  cornerRadius,\n  width,\n  height,\n  a,\n  b,\n  c,\n  d,\n  p,\n  circularSectionLength,\n}: CornerPathParams) {\n  if (cornerRadius) {\n    return `\n    L ${Math.min(width / 2, p)} ${height}\n    C ${p - a} ${height}\n      ${p - a - b} ${height}\n      ${p - a - b - c} ${height - d}\n    a ${cornerRadius} ${cornerRadius} 0 0 1 -${circularSectionLength} -${circularSectionLength}\n    C 0 ${height - (p - a - b)}\n      0 ${height - (p - a)}\n      0 ${Math.max(height / 2, height - p)}`\n  } else {\n    return `\n    L ${0} ${height}\n    L ${0} ${height / 2}`\n  }\n}\n\nfunction drawTopLeftPath({\n  cornerRadius,\n  width,\n  height,\n  a,\n  b,\n  c,\n  d,\n  p,\n  circularSectionLength,\n}: CornerPathParams) {\n  if (cornerRadius) {\n    return `\n    L 0 ${Math.min(height / 2, p)}\n    C 0 ${p - a}\n      0 ${p - a - b}\n      ${d} ${p - a - b - c}\n    a ${cornerRadius} ${cornerRadius} 0 0 1 ${circularSectionLength} -${circularSectionLength}\n    C ${p - a - b} 0\n      ${p - a} 0\n      ${+Math.min(width / 2, p)} 0\n    Z`\n  } else {\n    return `L ${0} ${0}\n    Z`\n  }\n}\n\ninterface CornerParams {\n  cornerRadius: number\n  cornerSmoothing: number\n  width: number\n  height: number\n}\n\ninterface CornerPathParams {\n  a: number\n  b: number\n  c: number\n  d: number\n  p: number\n  cornerRadius: number\n  circularSectionLength: number\n  width: number\n  height: number\n}\n\nfunction getPathParamsForCorner({\n  cornerRadius,\n  cornerSmoothing,\n  width,\n  height,\n}: CornerParams): CornerPathParams {\n  const maxRadius = Math.min(width, height) / 2\n  cornerRadius = Math.min(cornerRadius, maxRadius)\n\n  // The article from figma's blog\n  // https://www.figma.com/blog/desperately-seeking-squircles/\n  //\n  // The original code\n  // https://github.com/MartinRGB/Figma_Squircles_Approximation/blob/bf29714aab58c54329f3ca130ffa16d39a2ff08c/js/rounded-corners.js#L64\n\n  // 12.2 from the article\n  const p = Math.min((1 + cornerSmoothing) * cornerRadius, maxRadius)\n\n  let angleAlpha: number, angleBeta: number\n\n  if (cornerRadius <= maxRadius / 2) {\n    angleBeta = 90 * (1 - cornerSmoothing)\n    angleAlpha = 45 * cornerSmoothing\n  } else {\n    // When `cornerRadius` is larger and `maxRadius / 2`,\n    // these angles also depend on `cornerRadius` and `maxRadius / 2`\n    //\n    // I did a few tests in Figma and this code generated similar but not identical results\n    // `diffRatio` was called `change_percentage` in the orignal code\n    const diffRatio = (cornerRadius - maxRadius / 2) / (maxRadius / 2)\n\n    angleBeta = 90 * (1 - cornerSmoothing * (1 - diffRatio))\n    angleAlpha = 45 * cornerSmoothing * (1 - diffRatio)\n  }\n\n  const angleTheta = (90 - angleBeta) / 2\n\n  // This was called `h_longest` in the original code\n  // In the article this is the distance between 2 control points: P3 and P4\n  const p3ToP4Distance = cornerRadius * Math.tan(toRadians(angleTheta / 2))\n\n  // This was called `l` in the original code\n  const circularSectionLength =\n    Math.sin(toRadians(angleBeta / 2)) * cornerRadius * Math.sqrt(2)\n\n  // a, b, c and d are from 11.1 in the article\n  const c = p3ToP4Distance * Math.cos(toRadians(angleAlpha))\n  const d = c * Math.tan(toRadians(angleAlpha))\n  const b = (p - circularSectionLength - c - d) / 3\n  const a = 2 * b\n\n  return {\n    a,\n    b,\n    c,\n    d,\n    p,\n    width,\n    height,\n    circularSectionLength,\n    cornerRadius,\n  }\n}\n\nfunction toRadians(degrees: number) {\n  return (degrees * Math.PI) / 180\n}\n"],"names":["getSvgPath","cornerRadius","topLeftCornerRadius","topRightCornerRadius","bottomRightCornerRadius","bottomLeftCornerRadius","cornerSmoothing","width","height","defaultPathParams","getPathParamsForCorner","topLeftPathPathParams","undefined","topRightPathPathParams","bottomRightPathPathParams","bottomLeftPathPathParams","drawTopRightPath","drawBottomRightPath","drawBottomLeftPath","drawTopLeftPath","replace","trim","a","b","c","d","p","circularSectionLength","Math","max","min","maxRadius","angleAlpha","angleBeta","diffRatio","angleTheta","p3ToP4Distance","tan","toRadians","sin","sqrt","cos","degrees","PI"],"mappings":"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"}